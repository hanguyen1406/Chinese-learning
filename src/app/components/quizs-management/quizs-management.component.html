<div style="margin-top: 55px" class="container">
  <header>
    <!-- Nếu là admin -->
    <nav>
      <ol
        *ngIf="role === 'ROLE_ADMINISTRATOR'"
        class="breadcrumb repo-breadcrumb"
      >
        <li class="breadcrumb-item">
          <a routerLink="/administrator">Quản trị ADMIN</a>
        </li>
      </ol>
    </nav>

    <div class="box mb-3" *ngIf="role === 'ROLE_ADMINISTRATOR'">
      <button mat-raised-button color="primary" (click)="openCreate()">
        Thêm mới Bài kiểm tra
      </button>
    </div>

    <div *ngIf="role !== 'ROLE_ADMINISTRATOR'">
      <br />
      <h2><b>Các bài kiểm tra</b></h2>
    </div>

    <!-- Course Section List -->
    <div *ngFor="let c of courses" class="course-section">
      <!-- Course header -->
      <div class="course-header">
        <h3>Khóa học: {{ c.name }}</h3>
        <span class="badge"> {{ c.quizList.length }} bài kiểm tra </span>
      </div>

      <div class="quiz-wrapper">
        <!-- Nút cuộn trái -->
        <button class="scroll-btn left" (click)="scrollLeft(c.name)">
          <mat-icon>chevron_left</mat-icon>
        </button>

        <!-- Danh sách quiz cuộn ngang -->
        <div class="quiz-scroll" [id]="'scroll-' + c.name">
          <div class="quiz-card" *ngFor="let q of c.quizList">
            <div>
              <a (click)="doQuiz(q.id)">
                <h4 class="quiz-title" [title]="q.name">{{ q.name }}</h4>
              </a>

              <div class="quiz-info">
                <div style="padding-left: 3px">
                  ⏱ <span style="margin-left: 3px">{{ q.timeQuiz }} phút</span>
                </div>
                <div>❓ {{ q.numOfQues }} câu</div>

                <div (click)="doQuiz(q.id)" class="test">Bắt đầu làm</div>
              </div>

              <!-- ⭐ Checkbox bài test bắt buộc (chỉ admin thấy) -->
              <div
                *ngIf="role === 'ROLE_ADMINISTRATOR'"
                class="required-checkbox"
              >
                <mat-checkbox
                  [(ngModel)]="q.required"
                  (change)="updateRequired(q)"
                >
                  Bài test kết thúc khóa học
                </mat-checkbox>
              </div>
            </div>

            <!-- Nút xóa -->
            <div *ngIf="role === 'ROLE_ADMINISTRATOR'" class="quiz-actions">
              <div class="icon-btn delete-btn" (click)="onDelete(q)">
                <mat-icon>close</mat-icon>
              </div>
            </div>
          </div>
        </div>

        <!-- Nút cuộn phải -->
        <button
          *ngIf="c.quizList.length > 4"
          class="scroll-btn right"
          (click)="scrollRight(c.name)"
        >
          <mat-icon>chevron_right</mat-icon>
        </button>
      </div>

      <hr />
    </div>

    <!-- empty -->
    <div *ngIf="courses.length === 0" class="text-center">
      <h3>Không có bài kiểm tra nào.</h3>
    </div>
  </header>
</div>
