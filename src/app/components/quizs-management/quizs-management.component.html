<div style="margin-top: 55px" class="container">
  <header>
    <nav>
      <ol
        *ngIf="role == 'ROLE_ADMINISTRATOR'"
        class="breadcrumb repo-breadcrumb"
      >
        <li class="breadcrumb-item">
          <a
            href="/administrator"
            [routerLink]="['/administrator']"
            class="router-link-active"
          >
            Quản trị ADMIN
          </a>
        </li>
      </ol>
    </nav>

    <div class="box mb-3" *ngIf="role == 'ROLE_ADMINISTRATOR'">
      <button mat-raised-button color="primary" (click)="openCreate()">
        Thêm mới Bài kiểm tra
      </button>
    </div>
    <div *ngIf="role != 'ROLE_ADMINISTRATOR'">
      <br />
      <h2><b> Các bài kiểm tra </b></h2>
    </div>

    <div
      *ngIf="dataSource.data && dataSource.data.length > 0; else noQuizs"
      class="mt-4"
    >
      <div class="table-scroll">
        <table
          class="full-width-table"
          mat-table
          [dataSource]="dataSource"
          matSort
        >
          <!-- ID -->
          <ng-container matColumnDef="id">
            <th sticky mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
            <td mat-cell *matCellDef="let q">{{ q.id }}</td>
          </ng-container>

          <!-- Tên bài kiểm tra -->
          <ng-container matColumnDef="name">
            <th sticky mat-header-cell *matHeaderCellDef mat-sort-header>
              Tên bài kiểm tra
            </th>
            <td mat-cell style="width: 300px" *matCellDef="let q">
              <span class="text-truncate d-inline-block" [title]="q.name">
                {{ q.name }}
              </span>
            </td>
          </ng-container>

          <!-- Thời gian -->
          <ng-container matColumnDef="timeQuiz">
            <th sticky mat-header-cell *matHeaderCellDef mat-sort-header>
              Thời gian
            </th>
            <td mat-cell style="width: 200px" *matCellDef="let q">
              {{ q.timeQuiz }} phút
            </td>
          </ng-container>

          <!-- Course -->
          <ng-container matColumnDef="courseName">
            <th sticky mat-header-cell *matHeaderCellDef mat-sort-header>
              Course
            </th>
            <td mat-cell style="width: 300px" *matCellDef="let q">
              {{ q.courseName }}
            </td>
          </ng-container>

          <!-- Số câu hỏi -->
          <ng-container matColumnDef="numOfQues">
            <th sticky mat-header-cell *matHeaderCellDef mat-sort-header>
              Số câu hỏi
            </th>
            <td mat-cell *matCellDef="let q">{{ q.numOfQues }}</td>
          </ng-container>

          <!-- Actions -->
          <ng-container matColumnDef="actions">
            <th sticky mat-header-cell *matHeaderCellDef>Hành động</th>
            <td mat-cell *matCellDef="let q">
              <button mat-icon-button color="primary" [routerLink]="['/quizs', q.id]">
                <mat-icon>edit</mat-icon>
              </button>
              <button mat-icon-button color="warn" (click)="onDelete(q)">
                <mat-icon>delete</mat-icon>
              </button>
            </td>
          </ng-container>

          <tr
            mat-header-row
            *matHeaderRowDef="displayedColumns; sticky: true"
          ></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </div>
    </div>

    <ng-template #noQuizs>
      <div class="text-center"><h3>Không có bài kiểm tra nào.</h3></div>
    </ng-template>
  </header>
</div>
